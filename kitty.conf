#Force the tab bar to use our templates instead of the window title
tab_title_max_length 0

# --- Core Settings ---
dynamic_background_opacity yes
allow_remote_control       yes
macos_show_window_title_in none
hide_window_decorations    titlebar-only
draw_minimal_borders       yes
enable_audio_bell          no
cursor_shape               block
cursor_blink_interval      0 
confirm_os_window_close    0
shell_integration          enabled

# --- Background & Opacity ---
background_image           none
background_tint            0.80
background_opacity         0.35
background_blur            10
macos_colorspace           default
macos_titlebar_color       background

# --- Fonts ---
# BEGIN_KITTY_FONTS
font_family      family='Fira Code' postscript_name=FiraCode-Retina
bold_font        auto
italic_font      auto
bold_italic_font auto
# END_KITTY_FONTS
font_size         16.0
enable_ligatures  yes

# This forces Kitty to treat the pill symbols as exactly 1-cell wide
narrow_symbols U+e0b4,U+e0b6 1

# --- Theme ---
# BEGIN_KITTY_THEME
include current-theme.conf
# END_KITTY_THEME
inactive_text_alpha 0.6

# --- Layouts ---
enabled_layouts splits,stack

# --- Tab Bar Styling ---
tab_bar_edge            bottom
tab_bar_style           separator
# Double space here provides a buffer between the pills
tab_separator           " "
tab_bar_margin_height   0 0
# Lowering this ensures more horizontal room for the tabs to render fully
tab_bar_margin_width    10
tab_bar_background      #1e1e1e

# ACTIVE TAB: [Index]:program:folder:emoji
# Added a trailing space ' ' inside the template after the final symbol
active_tab_foreground   #1e1e1e
active_tab_background   #1e1e1e 
active_tab_font_style   bold
active_tab_title_template "{fmt.fg._89d185}î‚¶{fmt.bg._89d185}{fmt.fg._1e1e1e} {index}:{f'{tab.active_exe.split('/')[-1]}:' if (tab.active_exe.split('/')[-1] not in ['zsh', 'bash', 'sh', 'fish', 'starship'] and (tab.active_exe.split('/')[-1] != 'git' or title.startswith('git'))) else ''}{tab.active_wd.split('/')[-1] if (tab.active_wd.split('/')[-1] and tab.active_wd.split('/')[-1] != '~') else (title.split('/')[-1] if title.split('/')[-1] not in ['zsh', 'bash', 'sh', 'fish'] else 'Home')}:{['âœ¨','ğŸ¦„','ğŸ¬','ğŸ”®','ğŸ„','ğŸ¨','ğŸ¡','ğŸ’','ğŸ¦©','ğŸš€','ğŸ’–','ğŸ©','ğŸ¦œ','ğŸ¥‡','ğŸ†','ğŸ‘¾'][index % 16]} {fmt.fg._89d185}{fmt.bg._1e1e1e}î‚´ "

# INACTIVE TABS: [Index]:program:folder:emoji
# Added a trailing space ' ' inside the template after the final symbol
inactive_tab_foreground #7aa2f7
inactive_tab_background #1e1e1e
inactive_tab_font_style normal
tab_title_template "{fmt.fg._24283b}î‚¶{fmt.bg._24283b}{fmt.fg._7aa2f7} {index}:{f'{tab.active_exe.split('/')[-1]}:' if (tab.active_exe.split('/')[-1] not in ['zsh', 'bash', 'sh', 'fish', 'starship'] and (tab.active_exe.split('/')[-1] != 'git' or title.startswith('git'))) else ''}{tab.active_wd.split('/')[-1] if (tab.active_wd.split('/')[-1] and tab.active_wd.split('/')[-1] != '~') else (title.split('/')[-1] if title.split('/')[-1] not in ['zsh', 'bash', 'sh', 'fish'] else 'Home')}:{['âœ¨','ğŸ¦„','ğŸ¬','ğŸ”®','ğŸ„','ğŸ¨','ğŸ¡','ğŸ’','ğŸ¦©','ğŸš€','ğŸ’–','ğŸ©','ğŸ¦œ','ğŸ¥‡','ğŸ†','ğŸ‘¾'][index % 16]} {fmt.fg._24283b}{fmt.bg._1e1e1e}î‚´ "

# --- Keyboard Shortcuts ---

# Splitting Windows
map cmd+shift+v launch --location=vsplit --cwd=current
map cmd+shift+h launch --location=hsplit --cwd=current
map cmd+shift+d close_window
map cmd+enter   new_window

# Moving Focus between Splits
map cmd+h neighboring_window left
map cmd+l neighboring_window right
map cmd+k neighboring_window up
map cmd+j neighboring_window down

# Moving Splits (Position)
map alt+k move_window up
map alt+h move_window left
map alt+l move_window right
map alt+j move_window down

# Resizing Splits
map ctrl+cmd+left  resize_window narrower 2
map ctrl+cmd+right resize_window wider 2
map ctrl+cmd+up    resize_window taller 2
map ctrl+cmd+down  resize_window shorter 2
map ctrl+cmd+r     resize_window reset

# Layout Management
map cmd+i next_layout
map cmd+o last_used_layout
map cmd+z toggle_layout stack

# Tab Management
map cmd+t new_tab_with_cwd
map alt+n next_tab
map alt+p previous_tab

# Jump to specific Tabs
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9
map cmd+0 goto_tab 10 

# Window Controls
map cmd+n next_window
map cmd+p previous_window

# Text Navigation (macOS style)
map alt+left  send_text all \x1b\x62
map alt+right send_text all \x1b\x66
map cmd+left  send_text all \x01
map cmd+right send_text all \x05
